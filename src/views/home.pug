doctype html
html(lang="en")
    head
        meta(charset="UTF-8")
        meta(http-equiv="X-UA-Compatible", content="IE=edge")
        meta(name="viewport", content="width=device-width, initial-scale=1.0")
        title Between us
        link(rel="stylesheet", href="https://unpkg.com/mvp.css")
        style.
            /* Slider */
            .slider {
                -webkit-appearance: none;
                appearance: none;
                height: 5px;
                border-radius: 10px;   
                background: #d3d3d3; 
                outline: none;
                opacity: 0.7; 
                -webkit-transition: .2s; 
                transition: opacity .2s;
            }   
            .slider:hover {
                opacity: 1; 
            }
            .slider::-webkit-slider-thumb {
                -webkit-appearance: none; 
                appearance: none;
                width: 25px; 
                height: 25px;
                border-radius: 50%; 
                background: #04AA6D; 
                cursor: pointer; 
            }
            .slider::-moz-range-thumb {
                width: 25px; 
                height: 25px;
                border-radius: 50%;
                background: #04AA6D;
                cursor: pointer; 
            }
            .toggleSwitch {
                position: relative;
                display: inline-block;
                width: 40px;
                height: 20px;
            }

            .toggleSwitch input {
                opacity: 0;
                width: 0;
                height: 0;
            }

            /* Toggle Button */
            .toggleSlider {
                position: absolute;
                cursor: pointer;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background-color: #ccc;
                -webkit-transition: .4s;
                transition: .4s;
            }

            .toggleSlider:before {
                position: absolute;
                content: "";
                height: 15px;
                width: 15px;
                left: 2px;
                bottom: 2px;
                background-color: white;
                -webkit-transition: .4s;
                transition: .4s;
            }

            input:checked + .toggleSlider {
                background-color: #2196F3;
            }

            input:focus + .toggleSlider {
                box-shadow: 0 0 1px #2196F3;
            }

            input:checked + .toggleSlider:before {
                -webkit-transform: translateX(20px);
                -ms-transform: translateX(20px);
                transform: translateX(20px);
            }

            .toggleSlider {
                border-radius: 15px;
            }

            .toggleSlider:before {
                border-radius: 50%;
            }

            /* Radio Button */
            input[type="radio"]{
                display: none;
            }
            .radioButtonContainer{
                display: inline-flex;
                background: #fff;
                height: 2em;
                align-items: center;
                justify-content: space-evenly;
                border-radius: 0.5em;
                padding: 0.5em 0.5em;
            }

            .radioButtonLabel{
                background: #fff;
                height: 100%;
                width: 100%;
                display: flex;
                align-items: center;
                justify-content: space-evenly;
                margin: 0 0.5em;
                border-radius: 1em;
                cursor: pointer;
                padding: 0 0.5em;
                border: 2px solid lightgrey;
                transition: all 0.3s ease;
            }

            .radioButtonDot::before{
                position: absolute;
                content: "";
                top: 4px;
                left: 4px;
                width: 12px;
                height: 12px;
                background: #0069d9;
                border-radius: 50%;
                opacity: 0;
                transform: scale(1.5);
                transition: all 0.3s ease;
            }

            .radioButtonLabel span{
                font-size: 20px;
                color: #808080;
            }
            #chatOption:checked:checked ~ .chatOption,
            #participantsOption:checked:checked ~ .participantsOption,
            #fileBoardOption:checked:checked ~ .fileBoardOption
            {
                border-color: #0069d9;
                background: #0069d9;
            }
            
            #chatOption:checked:checked ~ .chatOption span,
            #participantsOption:checked:checked ~ .participantsOption span,
            #fileBoardOption:checked:checked ~ .fileBoardOption span
            {
                color: #fff;
            }

            /* Chat Bubble */
            .chatBubble {
                border: 2px solid #dedede;
                background-color: #f1f1f1;
                border-radius: 0.5em;
                padding: 0.5em 1em;
                margin: 0.5em 0
            }

            .userChat {
                border-color: #ccc;
                background-color: #ddd;
                margin-left: 1em
            }

            .chatBubble::after {
                content: "";
                clear: both;
                display: table;
            }

            .chatBubbleSender {
                float: left;
                margin-right: 1em;
                background-color: #118bee;
                padding: 0.2em 0.5em;
                color: white;
                border-radius: 1em;
            }
            
            .userChatTime {
                float: right;
                color: #aaa;
            }

            .chatBubbleTime {
                float: left;
                color: #999;
            }

            /* File upload  button */
            .fileInputLabel span {
                margin-left: 2em; 
                padding: 0.5em 1em; 
                cursor: pointer; 
                color: white; 
                background: #0069d9; 
                border-color: #0069d9; 
                border-radius: 0.5em;
            }
            .fileInputLabel span::after {
                content: " (Max: 10mb)"
            }
             #fileInput:disabled:disabled ~ .fileInputLabel span {
                background: green;
                cursor: none;
             }
           
            #fileInput:disabled:disabled ~ .fileInputLabel span::after{
                content: " (Uploading)"
            }

            /* File download button */

            .fileList {
                padding: 0.5em 1em;
                border: 2px solid #0069d9;
                border-radius: 1em;
            }

            .fileList p {
                font-size: 0.8em;
                text-align: right;
                color: gray;
                font-weight: normal;
            }
    body 
        header(style="display: flex; justify-content: space-between; align-items: center; padding: 0em; margin-top: 1em; box-shadow: 0 0.2em 0 lightgrey; ")
            span(style="display: inline-block; margin-left: 20%; width: 50%; font-size: x-large; font-weight: bold; padding-top: 1em; padding-bottom: 1em") Between us
            div(style="display: inline; padding-bottom: 0; padding-top: 1em;") 
                label(for="nickname" style="display: inline; padding-right: 1em; font-weight: normal; color: gray;") Nick name
                input#nicknameInput(name="nickname" placeholder="Enter nick name" type="text" required style="display: inline;")
                span#nicknameLabel(style="display: none; font-weight: bold") Loading
        main(style="height: 100%; padding-top: 1em; margin: 0 auto")
            div#roomList(style="border: 2px solid gray; padding: 1em; margin-top: 2em; margin-left: 30%; max-width: 50%;")
                h3 Join room
                ul(style="overflow: scroll; list-style: none; font-size: large; font-weight: bold; color: white; max-height: 10em; padding-right: 2em")
            form#createRoomForm(style="margin-top: 2em; margin-left: 30%; max-width: 50%")
                h3#createRoomLabel Create new room
                input(type="text" required style="display: inline; margin-right: 2em")
                button Enter      
            form#settings(style="display: block; margin-left: 30%; max-width: 50%;")
                h2(style="padding-left: 1em;  border-bottom: 1px solid gray") Settings
                    Button#confirmSetting(style="margin-left: 50%; font-size: 0.5em; padding: 1em 2em") Done
                div#cameraSetting(style="display: flex; justify-content: space-between; margin-right: 10%")
                    span Camera 
                    select
                    label.toggleSwitch
                            input(type="checkbox")
                            span.toggleSlider
                div#micSetting(style="display: flex; justify-content: space-between; margin-right: 10%")
                    span Microphone
                    select
                    label.toggleSwitch
                            input(type="checkbox")
                            span.toggleSlider
                h3 Preview
                video#preview(autoplay, playsinline, width="100%")
            section#videoChat(style="display: flex; flex-wrap: wrap; padding-left: 2em; padding-right: 2em; width: 100%; height: 100%")
                aside#userVideo
                    video(autoplay playsinline, width="100%", style="display: none; padding: 1em")
                    canvas(style="width: 100%")
                    div(style="display: flex; justify-content: space-evenly;") 
                        Button#cameraToggleButton(style="width: 4em; height: 4em; padding: 1em; border-radius: 50%") 📷
                        Button#micToggleButton(style="width: 4em; height: 4em; padding: 1em; border-radius: 50%") 🎤
                    div#controls(style="display: block; width: 100%")   
                        div.sliderContainer(style="display: flex; justify-content: space-around; width: 100%;")
                            span Brightness
                            input#brightness.slider(type="range" min="0.8" max="1.2" value="1" step="0.01" style="width: 60%")
                        div.sliderContainer(style="display: flex; justify-content: space-around; width: 100%;")
                            span Saturation
                            input#saturation.slider(type="range" min="0.5" max="1.5" value="1" step="0.01" style="width: 60%") 
                aside#highlightVideo(style="display: none;")
                    video(autoplay, playsinline, width="100%")
                    h3(style="padding-left: 2em")
                    Button#fullScreenButton(style="padding: 0 0.5em; border-radius: 1em") Full screen
                form#chatForm(style="width: 200px; height: 60vh; padding-bottom: 5em")
                    div.radioButtonContainer 
                        input#chatOption(type="radio" name="select" checked)
                        input#participantsOption(type="radio" name="select")
                        input#fileBoardOption(type="radio" name="select")
                        label.radioButtonLabel.chatOption(for="chatOption" style="font-weight: bold")
                            span Chat
                        label.radioButtonLabel.participantsOption(for="participantsOption")
                            span Users
                        label.radioButtonLabel.fileBoardOption(for="fileBoardOption")
                            span Files
                    div#chatBox(style="display: block; width: 100%; height: 80%; margin-bottom: 1em; padding: 0; border: 1px solid gray; border-radius: 1em; box-shadow: inset -1px -1px 2px 1px gray;")
                        ul(style="overflow: auto; height: 100%; list-style: none; font-size: small; font-weight: bold; padding: 1em 0.5em")
                    div#userListBox(style="display: none")
                        ul(style="list-style: none; font-size: large; font-weight: bold; margin-left: 1em; padding: 1em 0.5em;")
                    div#chatInput(style="display: flex; align-items: center")
                        input(type="text" style="display: inline; width: 70%; height: 1.5em; margin-bottom: 0; margin-right: 0.5em")
                        button(style="padding: 0.5em 1em;") Send
                    div#fileBoard(style="display:none; padding-top: 1em;")
                        input#fileInput(type="file" multiple style="display: none")
                        label.fileInputLabel(for="fileInput" style="display: inline")
                            span 📁 Upload file
                        ul(style="list-style: none; font-size: large; font-weight: bold; margin-left: 1em; padding: 1em 0.5em;")
                aside#otherUsersVideo(style="display: block; width: 100%")
        script(src="/socket.io/socket.io.js")
        script(type="module" src="public/js/app.js")